#LyX 2.3 created this file. For more info see http://www.lyx.org/
\lyxformat 544
\begin_document
\begin_header
\save_transient_properties true
\origin unavailable
\textclass article
\begin_preamble

%------------------------------------------------------------------------------
%	REQUIRED PACKAGES AND  CONFIGURATIONS
%------------------------------------------------------------------------------
% PACKAGES FOR TITLES
\usepackage{titlesec}
\usepackage{color}
% PACKAGES FOR LANGUAGE AND FONT
\usepackage[utf8]{inputenc}
\usepackage[english]{babel}
\usepackage[T1]{fontenc} % Font encoding

% PACKAGES FOR IMAGES
\usepackage{graphicx}
\graphicspath{{Images/}}
\usepackage{eso-pic} % For the background picture on the title page
\usepackage{subfig} % Numbered and caption subfigures using \subfloat
\usepackage{caption} % Coloured captions
\usepackage{transparent}

% STANDARD MATH PACKAGES
\usepackage{amsmath}
\usepackage{amsthm}
\usepackage{bm}
\usepackage[overload]{empheq}  % For braced-style systems of equations

% PACKAGES FOR TABLES
\usepackage{tabularx}
\usepackage{longtable} % tables that can span several pages
\usepackage{colortbl}

% PACKAGES FOR ALGORITHMS (PSEUDO-CODE)
\usepackage{algorithm}
\usepackage{algorithmic}

% PACKAGES FOR REFERENCES & BIBLIOGRAPHY
\usepackage[colorlinks=true,linkcolor=black,anchorcolor=black,citecolor=black,filecolor=black,menucolor=black,runcolor=black,urlcolor=black]{hyperref} % Adds clickable links at references
\usepackage{cleveref}
\usepackage[square, numbers, sort&compress]{natbib} % Square brackets, citing references with numbers, citations sorted by appearance in the text and compressed
%\bibliographystyle{plain} % You may use a different style adapted to your field

% PACKAGES FOR THE APPENDIX
\usepackage{appendix}

% PACKAGES FOR ITEMIZE & ENUMERATES 
\usepackage{enumitem}

% OTHER PACKAGES
\usepackage{amsthm,thmtools,xcolor} % Coloured "Theorem"
\usepackage{comment} % Comment part of code
\usepackage{fancyhdr} % Fancy headers and footers
\usepackage{lipsum} % Insert dummy text
\usepackage{tcolorbox} % Create coloured boxes (e.g. the one for the key-words)

\input{../Configuration_files/config}
\makeatletter
\end_preamble
\use_default_options true
\maintain_unincluded_children false
\language english
\language_package default
\inputencoding default
\fontencoding global
\font_roman "default" "default"
\font_sans "default" "default"
\font_typewriter "default" "default"
\font_math "auto" "auto"
\font_default_family default
\use_non_tex_fonts false
\font_sc false
\font_osf false
\font_sf_scale 100 100
\font_tt_scale 100 100
\use_microtype false
\use_dash_ligatures true
\graphics default
\default_output_format default
\output_sync 0
\bibtex_command default
\index_command default
\paperfontsize default
\spacing single
\use_hyperref false
\papersize default
\use_geometry false
\use_package amsmath 1
\use_package amssymb 1
\use_package cancel 1
\use_package esint 1
\use_package mathdots 1
\use_package mathtools 1
\use_package mhchem 1
\use_package stackrel 1
\use_package stmaryrd 1
\use_package undertilde 1
\cite_engine basic
\cite_engine_type default
\biblio_style plain
\use_bibtopic false
\use_indices false
\paperorientation portrait
\suppress_date false
\justification true
\use_refstyle 1
\use_minted 0
\index Index
\shortcut idx
\color #008000
\end_index
\secnumdepth 3
\tocdepth 3
\paragraph_separation indent
\paragraph_indentation default
\is_math_indent 0
\math_numbering_side default
\quotes_style english
\dynamic_quotes 0
\papercolumns 1
\papersides 1
\paperpagestyle default
\tracking_changes false
\output_changes false
\html_math_output 0
\html_css_as_file 0
\html_be_strict false
\end_header

\begin_body

\begin_layout Section
Introduction
\end_layout

\begin_layout Standard
The concept of 
\begin_inset Quotes eld
\end_inset

Time Measurement
\begin_inset Quotes erd
\end_inset

 is defined as the time elapsed between an absolute time reference, taken
 as 
\begin_inset Quotes eld
\end_inset

zero
\begin_inset Quotes erd
\end_inset

 on the time axis, and the occurrence of a certain event of interest.
 In this case, our measurement is a Timestamp; however, we are usually more
 interested to carry out a Time Measurement as the relative 
\begin_inset Quotes eld
\end_inset

time distance
\begin_inset Quotes erd
\end_inset

 between two events, the first one being the 
\begin_inset Quotes eld
\end_inset

START
\begin_inset Quotes erd
\end_inset

 signal, and the second being the 
\begin_inset Quotes eld
\end_inset

STOP
\begin_inset Quotes erd
\end_inset

 signal.
 Anyhow, it's clear that a Timestamp is nothing but a particular case of
 time distance between a chosen absolute time reference, and the event under
 study.
 Conversely, the time distance between two events is nothing but the time
 difference between their timestamps, each one calculated referencing to
 a common absolute 
\begin_inset Quotes eld
\end_inset

zero
\begin_inset Quotes erd
\end_inset

 time origin.
 
\end_layout

\begin_layout Standard
With respect to the scientific research field, recent years have been characteri
zed by a continuous growth in the study of temporal evolution in chemical-physic
al phenomena; this has lead to the need of employing high-performance instrument
s called Time Interval Meters (TIMs), with the task of measuring really
 small time intervals, with increasing precision and resolution.
 Since the TIM needs to have at least the same performance, in terms of
 speed and accuracy, of the sensors used in the measurement setup, it must
 have features as picoseconds precision with hundreds megahertz (MHz) sampling
 rate.
 
\end_layout

\begin_layout Subsection
Applications
\end_layout

\begin_layout Standard
The applications requiring these kind of instruments and performances span
 into very differents fields of the scientific research, from the biomedical
 to the nuclear one.
 Since countless applications belong to these areas, we will describe the
 most relevant ones, used every day.
\end_layout

\begin_layout Itemize
Time-of-Flight Positron Emission Tomography (PET-TOF) 
\begin_inset CommandInset citation
LatexCommand cite
key "7581850"
literal "false"

\end_inset

: it is a 3D technique used for medical imaging to detect the presence of
 tumors in the human body.
 A substance called radiotracer, characterized by capability to release
 a great number of positrons, is bound to a molecule which has the peculiarity
 to travel towards the region where the tumor is located.
 Once there, the positrons are emitted by the radioactive decay of the radiotrac
er, and collide with electrons.
 When there is collision between a positron and an electron, characterized
 by same electrical charge with opposite sign, the so-called annihilation
 process occurs, which results in two 511 keV gamma photons travelling on
 the same line but with opposite directions.
 These two gamma photons arrive with a certain delay to the ring of detectors
 surrounding the patient, and thanks to the TIM is possible to measure this
 delay between the START event (the first gamma photon arriving to the detector)
 and the STOP event (the second photon detected) (see Figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:PET-TOF-working-principle."
plural "false"
caps "false"
noprefix "false"

\end_inset

).
 From the time measure it is then possible to retrieve the spatial information
 describing the position of the tumor.
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename images/pet.png
	width 30text%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
PET-TOF working principle.
\begin_inset CommandInset label
LatexCommand label
name "fig:PET-TOF-working-principle."

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Itemize
Laser Rangefinding 
\begin_inset CommandInset citation
LatexCommand cite
key "4907333"
literal "false"

\end_inset

: it is a technique using a laser beam to determine the distance to an object,
 thanks to an instrument called laser rangefinder, also known as laser telemeter.
 The measured quantity, in this case, is the time distance between the instant
 at which the laser pulse is sent towards the object, and the instant at
 which it is detected by the photodiode (located in the same position of
 the sender) after being reflected by the target (see Figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Laser-Rangefinder-working"
plural "false"
caps "false"
noprefix "false"

\end_inset

).
 Once the time information 
\begin_inset Formula $\varDelta T$
\end_inset

 is obtained, and by knowing the propagation velocity 
\begin_inset Formula $v$
\end_inset

 of the laser, it is possible to retrieve the distance 
\begin_inset Formula $L$
\end_inset

 at which the object is located with respect to the user, thanks to the
 following equation:
\begin_inset Formula 
\begin{equation}
2\cdot L=v\cdot\varDelta T\label{eq:laser1}
\end{equation}

\end_inset

and, therefore:
\begin_inset Formula 
\begin{equation}
L=\frac{v\cdot\varDelta T}{2}\label{eq:laser2}
\end{equation}

\end_inset


\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename images/laser.png
	width 50text%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Laser Rangefinder working principle.
\begin_inset CommandInset label
LatexCommand label
name "fig:Laser-Rangefinder-working"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Itemize
Time-Resolved Spectroscopy 
\begin_inset CommandInset citation
LatexCommand cite
key "6674612"
literal "false"

\end_inset

: it is the study, in physics and physical chemistry, of dynamic processes
 in materials or chemical compounds by means of spectroscopic techniques.
 The technique can be applied to any process that leads to a change in the
 properties of a material, but usually, fluorescence processes are studied.
 The common method is called Time Correlated Single Photon Counting (TCSPC),
 which achieves a resolution in the order of picoseconds, and consists in
 the excitation of the material thanks to the illumination by a pulsed laser;
 this causes a process called 'fluorescence', that is a repetitive emission
 of single photons which are then registered by a detector.
 In this way, the photon arrivals per time can be represented in a histogram,
 whose bins represent the time decay (
\begin_inset Formula $T_{DECAY}$
\end_inset

), and therefore the time decay profile of that material is obtained.
 The START signal is the excitation laser pulse, while the STOP signals
 are the photons emitted by fluorescence.
 The working principle is represented also in Figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Time-Resolved-Spectroscopy-worki"
plural "false"
caps "false"
noprefix "false"

\end_inset

.
 
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename images/spectroscopy.png
	width 80text%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Time-Resolved Spectroscopy working principle employing Time Correlated Single
 Photon Counting (TCSPC).
\begin_inset CommandInset label
LatexCommand label
name "fig:Time-Resolved-Spectroscopy-worki"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Subsection
Typical measurement setup
\end_layout

\begin_layout Standard
In all the applications just presented, the typical setup to measure the
 time distance 
\begin_inset Formula $\varDelta T$
\end_inset

 between the two physical events, can be represented by the block diagram
 reported in Figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Measurement-Setup-employing"
plural "false"
caps "false"
noprefix "false"

\end_inset

.
 We have our two physical events hitting the two detectors, by which they
 are converted in electrical signals; then, this two electrical signals
 are processed by Time Discriminators in order to get the right pulse shape,
 compatible with the TIM.
 In the end, the Time-Interval-Meter measures the time difference 
\begin_inset Formula $\varDelta T$
\end_inset

, giving a digital code in output.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename images/tim.png
	width 100text%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Measurement Setup employing TIMs.
\begin_inset CommandInset label
LatexCommand label
name "fig:Measurement-Setup-employing"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Standard
In this thesis work, a fully-digital Time-Interval-Meter, called Time-to-Digital
 Converter (TDC), will be presented.
 This instrument converts the measured time interval into a digital binary
 code, representing the time elapsed between the START and the STOP event.
\end_layout

\begin_layout Subsection
Figures Of Merit (FOMs)
\end_layout

\begin_layout Standard
Let's see which are the main Figures Of Merit (FOMs) characterizing the
 TDC's performances:
\end_layout

\begin_layout Itemize
Resolution: it is defined as the minimum time interval that can be measured
 by the TDC.
 The time duration of the LSB of the digital output code is commonly used
 as the index of resolution.
 High performance TDCs have a resolution of hundreds of femtoseconds.
 This FOM can be improved using sub-interpolation techniques we will see
 later.
\end_layout

\begin_layout Itemize
Full-Scale Range (FSR): it is the maximum time interval that can be measured
 by the instrument.
 A typical drawback of the TDC is the trade-off existing between FSR and
 LSB (resolution).
 This can be solved thanks to a technique called Nutt-Interpolation, as
 we will see later.
\end_layout

\begin_layout Itemize
Precision: it's the capability of the TDC to give the same output digital
 code given the same time interval in input.
 Since a gaussian curve is obatained from a set of repeated measurements,
 its standard deviation is typically used as index of precision.
 
\end_layout

\begin_layout Itemize
Linearity: the TDC suffers from Differential Non-Linearity (DNL) and Integral
 Non-Linearity (INL).
 The DNL is the difference between two consecutive output digital codes,
 and the INL is the integral of the DNL.
 They are commonly measured as percentage of LSB.
\end_layout

\begin_layout Itemize
Conversion Time: it is the time required by the TDC to produce a valid output
 measure, given an input time interval.
\end_layout

\begin_layout Itemize
Measure Rate: it's the throughput of the instrument, i.e.
 the number of measures per second.
\end_layout

\begin_layout Itemize
Dead-Time: minimum time interval between two valid measures.
 It is representative of the multi-hit capability of the TDC.
\end_layout

\begin_layout Itemize
Voltage Sensitivity: it describes how much the accuracy of the measurement
 changes, with respect to power supply fluctuations.
\end_layout

\begin_layout Itemize
Temperature Sensitivity: it describes how much the accuracy of the measurement
 changes, with respect to temperature variations.
 High temperature stability is required.
 It's typical value is in the range of 0.01÷0.1 ps/
\begin_inset Formula $^{◦}$
\end_inset

C, but usually, compensation techniques are required in order to reach high
 robustness against these variations.
\end_layout

\begin_layout Subsection
FPGA vs.
 ASIC
\end_layout

\begin_layout Standard
The TDC can be implemented both in an Application Specific Integrated Circuit
 (ASIC) 
\begin_inset CommandInset citation
LatexCommand cite
key "123198"
literal "false"

\end_inset

 and in a Field Programmable Gate Array (FPGA) 
\begin_inset CommandInset citation
LatexCommand cite
key "9452098"
literal "false"

\end_inset

.
 Indeed, both these two approaches can be used to implement a certain digital
 function, the former being the fixed computing approach, the latter being
 the configurable computing one.
 Let's briefly describe the pros and cons of both of them.
\end_layout

\begin_layout Paragraph
FPGA
\end_layout

\begin_layout Standard
A Field Programmable Gate Array (FPGA) is a fully-digital electronic device
 that can be configured and re-configured by a designer, after the manufacturing
 process.
\end_layout

\begin_layout Standard
FPGAs contain a lot of pre-defined combinational and sequential logic elements
 that can be programmed and connected to produce the desired functionality.
 All these elements are contained in logic blocks called Configurable Logic
 Blocks (CLBs), which are the main logic resources for implementing sequential
 as well as combinatorial circuits, and the connections between them are
 carried out thanks to a programmable switch matrix.
\end_layout

\begin_layout Standard
The CLBs are generally arranged in a regular array inside the FPGA, and
 each one of them connects to the switch matrix, which runs vertically and
 horizontally between the CLB rows and columns.
\end_layout

\begin_layout Standard
Furthermore, FPGAs have dedicated modules to create and manage clocks such
 as Mixed-Mode Clock Manager (MMCM) and a Phase-Locked Loop (PLL) modules.
 In the end, buffers are available to correctly transfer the signals from
 the outside of the chip to the inside (and viceversa) or through different
 clock regions.
\end_layout

\begin_layout Standard
The main advantages of an FPGA are: high felixibility given to the user,
 thanks to the reconfigurable nature of the device; fast prototyping and
 low time-to-market, since it is sufficient to modify the Hardware Description
 Language (HDL) to immediately change the hardware configuration of the
 device; low Non-Recurring Engineering (NRE) costs, since there is no need
 to buy litographic photomasks, thus having a low entry barrier.
\end_layout

\begin_layout Standard
The main drawbacks are instead: the lower operating frequency and higher
 power consumption with respect to ASICs, since FPGAs are not optimized
 for the specific functionality implemented; the impossibility to have analog
 or mixed-signal designs, since FPGAs are fully-digital devices.
\end_layout

\begin_layout Paragraph
ASIC
\end_layout

\begin_layout Standard
An Application Specific Integrated Circuit (ASIC) is a chip designed to
 perform a specific functionality, suited for an high-volume production.
 All the resources are placed on a single silicon chip, and the functionality
 is fixed by the manufacturing process.
\end_layout

\begin_layout Standard
The main advantages of an ASIC are: very high performance and lower power
 consumption with respect to FPGAs, since the entire design is tailored
 to perform the specific functionality; the possibility to have also analog
 and mixed-signal designs other than digital ones.
\end_layout

\begin_layout Standard
The main drawbacks are: the impossibility to change the ASIC's functionality
 and thus the lack of flexibility, given by the fixed nature of the design;
 the high time-to-market, in the order of months, employed in the manufacturing
 process; the high NRE costs for the fabrication, representing an higher
 entry barrier with respect to FPGAs.
\end_layout

\begin_layout Paragraph
Comparison
\end_layout

\begin_layout Standard
Despite the ASIC being much more power efficient and performant, the FPGA
 approach is the most suitable choice in the scientific research world,
 being characterized by high reconfigurability, fast prototyping, low non-recurr
ing engineering (NRE) costs, and low time-to-market.
 Indeed, these features are acquiring more and more importance, due to the
 requirements of the applications described before.
 Table 
\begin_inset CommandInset ref
LatexCommand ref
reference "tab:Comparison-between-FPGA"
plural "false"
caps "false"
noprefix "false"

\end_inset

 summarizes the strengths belonging to each one of the two approaches.
\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="7" columns="3">
<features tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Feature
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
FPGA
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
ASIC
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Performance
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $\checkmark$
\end_inset


\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Power Efficiency
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $\checkmark$
\end_inset


\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Flexibility
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $\checkmark$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Time-to-market
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $\checkmark$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
NRE costs
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $\checkmark$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Analog elements
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $\checkmark$
\end_inset


\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Comparison between FPGA and ASIC.
\begin_inset CommandInset label
LatexCommand label
name "tab:Comparison-between-FPGA"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Subsection
State of the Art
\end_layout

\begin_layout Standard
In the current scientific research world, different types of Time-Interval-Meter
 (TIM) are employed.
 The TIM is an electronic circuit, and it can be analog, digital, or mixed-signa
l.
 Let's decribe the available main types of TIMs.
\end_layout

\begin_layout Subsubsection
Time-to-Amplitude Converter (TAC)
\end_layout

\begin_layout Standard
Considering the mixed-signal approach, the Time-to-Amplitude Converter (TAC)
 is the main device used in research, and it converts a time interval 
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none

\begin_inset Formula $\varDelta t$
\end_inset


\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
 into a voltage level 
\begin_inset CommandInset citation
LatexCommand cite
key "2Nicola"
literal "false"

\end_inset

 
\begin_inset CommandInset citation
LatexCommand cite
key "8743999"
literal "false"

\end_inset

.
 More precisely, its working principle consists in building a voltage ramp
 that starts synchronously with the START event, and it stops when the STOP
 event occurs.
 In this way, the obtained ramp has as final value a voltage level proportional
 to the measured time interval.
 Then, at the second stage, an ADC converts the measured voltage level into
 a digital code.
 We can see the structure of a conventional TAC in Figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Conventional-structure-of"
plural "false"
caps "false"
noprefix "false"

\end_inset

, where the capacitor 
\shape italic
C
\shape default
 is charged by a constant current 
\shape italic
I
\shape default
 as long as START = 1 and STOP = 0; then, as soon as STOP = 1, START deasserts
 to 0, and the capacitor gets isolated from the current generator, thus
 holding the charge.
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename /home/mconsonni/Desktop/tesi_mconsonni/2.State-of-the-Art/images/TAC.png
	width 100text%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Structure and operation of a conventional Time-to-Amplitude Converter (TAC).
\begin_inset CommandInset label
LatexCommand label
name "fig:Conventional-structure-of"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset

 
\end_layout

\begin_layout Standard
The value of the voltage across the capacitor has the following expression:
\begin_inset Formula 
\begin{equation}
V_{C}=\varDelta t\cdot\frac{I}{C}\label{eq:cap}
\end{equation}

\end_inset


\end_layout

\begin_layout Standard
and it is converted, by the 
\shape italic
n
\shape default
-bit ADC, into a digital output code representing the time distance 
\begin_inset Formula $\varDelta t$
\end_inset

.
 The resolution of the TAC is equal to:
\begin_inset Formula 
\begin{equation}
\varDelta t_{LSB}=\frac{V_{FSR}}{2^{n}}\cdot\frac{C}{I}\label{eq:TAC_res}
\end{equation}

\end_inset


\end_layout

\begin_layout Standard
where 
\begin_inset Formula $V_{FSR}$
\end_inset

 is the full voltage span of the ADC, given by its supply voltage.
 It can be clearly seen from Equation 
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:TAC_res"
plural "false"
caps "false"
noprefix "false"

\end_inset

 that this architecture suffers from a trade-off between resolution and
 Full-Scale Range (FSR).
 This trade-off, along with the non-idealities of the current generator
 and of the other components, represent a significant drawback, and for
 this reason a fully-digital approach is usually preferred.
 
\end_layout

\begin_layout Subsubsection
Shift–Clock Fast–Counter TDC, SCFC-TDC
\end_layout

\begin_layout Standard
This is a fully-digital architecture which employs a counter, driven by
 a clock signal with period 
\begin_inset Formula $T_{CLK}$
\end_inset

, to produce two timestamps that are associated respectively to the value
 of the counter at the START signal occurrence (
\begin_inset Formula $T_{START}$
\end_inset

) and at the STOP condition (
\begin_inset Formula $T_{STOP}$
\end_inset

) 
\begin_inset CommandInset citation
LatexCommand cite
key "9875493"
literal "false"

\end_inset

.
 Then, their difference provides the elapsed time between the two events,
 which is equal to:
\begin_inset Formula 
\begin{equation}
\varDelta t=T_{CLK}\cdot(T_{STOP}-T_{START})\label{eq:scfc-timediff}
\end{equation}

\end_inset


\end_layout

\begin_layout Standard
However, this single-counter implementation is useless for the kind of applicati
ons that require Time-to-Digital Converters, since the achievable resolution
 
\begin_inset Formula $\varDelta t_{LSB}$
\end_inset

 in this case is just equal to 
\begin_inset Formula $T_{CLK}$
\end_inset

.
 Hence, 
\begin_inset Formula $N$
\end_inset

 counters are used, each one driven by the same clock signal used before,
 but shifted in phase by 
\begin_inset Formula $\varDelta\phi=\frac{2\pi}{N}$
\end_inset

 thanks to a Phase-Locked Loop (PLL).
 This allows to have more clock edges acting as intermediate levels in the
 counting process, and the resolution of the device improves to:
\begin_inset Formula 
\begin{equation}
\varDelta t_{LSB}=\frac{T_{CLK}}{N}\label{eq:scfc-lsb}
\end{equation}

\end_inset

 The FSR, given that each counter is 
\shape italic
n
\shape default
-bit wide, is instead equal to:
\begin_inset Formula 
\begin{equation}
\varDelta t_{FSR}=2^{n}\cdot T_{CLK}\label{eq:scfc-fsr}
\end{equation}

\end_inset


\end_layout

\begin_layout Standard
The architecture just described is represented in Figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Shift-Clock-Fast-Counter-TDC"
plural "false"
caps "false"
noprefix "false"

\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename images/scfc.png
	width 60text%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Shift-Clock Fast-Counter TDC (SCFC-TDC) architecture employing 
\begin_inset Formula $N$
\end_inset

 n-bit counters.
\begin_inset CommandInset label
LatexCommand label
name "fig:Shift-Clock-Fast-Counter-TDC"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Standard
The main advantage of this architecture is that it doesn't suffer from the
 trade-off between resolution (LSB) and Full-Scale Range (FSR), as can be
 seen by Equations 
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:scfc-lsb"
plural "false"
caps "false"
noprefix "false"

\end_inset

 and 
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:scfc-fsr"
plural "false"
caps "false"
noprefix "false"

\end_inset

.
 Besides, it exploits small hardware resources, and has a small DNL and
 INL.
 The drawback of this architecture is that the resolution is dependent from
 the available clock lines of the FPGA and, being these limited (e.g: in
 Xilinx 7-Series FPGAs, just ten clock lines are available), the achievable
 resolution is not that high, but it is limited to some hundred of ps.
 Moreover, more clock lines lead to more power consumption.
\end_layout

\begin_layout Subsubsection
Delay-Line TDC
\end_layout

\begin_layout Standard
To overcome the resolution limit given by the SCFC-TDC, Delay-Line TDCs
 (DL-TDCs) are typically preferred.
 A Delay-Line is nothing but a chain of buffers, also called 
\begin_inset Quotes eld
\end_inset

taps
\begin_inset Quotes erd
\end_inset

 or 
\begin_inset Quotes eld
\end_inset

bins
\begin_inset Quotes erd
\end_inset

, along which the input START and STOP events propagate.
 The overall method to calculate the time interval between the two signals
 is to take a snapshot of the Delay-Line as soon as a sampling event occurs,
 and count the number of bins hit by both the START signal and by the STOP
 signal in their propagation process.
 Then, by making the difference between the calculated number of bins, the
 time interval information is obtained.
 Two main types of Delay-Line TDCs are available: the Tapped Delay-Line
 TDC (TDL-TDC) 
\begin_inset CommandInset citation
LatexCommand cite
key "9452098"
literal "false"

\end_inset

 and the Vernier Delay-Line TDC (VDL-TDC) 
\begin_inset CommandInset citation
LatexCommand cite
key "8932420"
literal "false"

\end_inset

.
\end_layout

\begin_layout Paragraph
Tapped Delay-Line TDC, TDL-TDC
\end_layout

\begin_layout Standard
The Tapped Delay-Line (TDL) consists of a sequence of buffers (also called
 'bins' or 'taps') connected in series, where the output of each bin is
 connected to the D input of a D flip-flop.
 In this way, the time elapsed from the START event to the STOP one, can
 be obtained by simply counting the number of bins crossed by the former,
 when the latter occurs 
\begin_inset CommandInset citation
LatexCommand cite
key "Nicola55"
literal "false"

\end_inset

.
 More precisely, the operation of the TDL is the following: at first, all
 the buffers of the chain are kept to '0' logical value; then, when our
 first asynchronous event of interest occurs, i.e.
 our START signal, it propagates along the series of buffers (each one having
 its own propagation delay 
\begin_inset Formula $\varDelta t_{p}$
\end_inset

), asserting them to '1' as soon as they are crossed in the propagation
 process; in the end, the STOP signal, which is nothing but the rising edge
 of the sampling clock, stores in the flip-flops the actual values of the
 buffers in the chain, thus taking a picture of the propagation situation
 of our signal.
 Therefore, a thermometric code at the output of the chain of flip-flops
 is obtained, and it represents the number of bins crossed by the propagating
 START signal and, thus, knowing the delay of each buffer, the time elapsed
 from the START to the STOP signal.
 In Figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Tapped-Delay-Line-structure."
plural "false"
caps "false"
noprefix "false"

\end_inset

 is reported the structure of the Tapped-Delay Line and the propagation
 of the START signal till the third bin, thus obtaining that thermometric
 code.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename ../2.State-of-the-Art/images/tdl.png
	width 100text%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Tapped Delay-Line structure and propagation mechanism.
\begin_inset CommandInset label
LatexCommand label
name "fig:Tapped-Delay-Line-structure."

\end_inset


\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
The resolution (LSB) of this architecture depends on the number of buffers
 (
\begin_inset Formula $N_{B})$
\end_inset

 and on the clock period (
\begin_inset Formula $T_{CLK})$
\end_inset

, as shown in the following equation:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{equation}
LSB=\frac{T_{CLK}}{N_{B}}\label{eq:TDL resolution}
\end{equation}

\end_inset


\end_layout

\begin_layout Standard
The FSR is given instead by 
\begin_inset Formula $T_{CLK}$
\end_inset

 itself.
\end_layout

\begin_layout Paragraph
Vernier Delay-Line TDC, VDL-TDC
\end_layout

\begin_layout Standard
The Vernier Delay-Line (VDL) 
\begin_inset CommandInset citation
LatexCommand cite
key "8932420"
literal "false"

\end_inset

 relies on two chains with the same number 
\begin_inset Formula $N$
\end_inset

 of buffers and, while the output of the first chain's taps are connected
 to the D-input of the sampling Flip-Flops (FFs), the outputs of the second
 chain are connected to their clock inputs.
 The START signal propagates on the first chain with a propagation delay
 
\begin_inset Formula $t_{p1}$
\end_inset

 on each bin, and the STOP signal travels on the second chain with a propagation
 delay 
\begin_inset Formula $t_{p2}$
\end_inset

 on each bin, which is lower than 
\begin_inset Formula $t_{p1}$
\end_inset

.
 Hence, as soon as the STOP signal, travelling on the faster chain, reaches
 the START one, the flip-flop corresponding to bin 
\begin_inset Formula $N_{x}$
\end_inset

 change its state, and provides the information of the time interval 
\begin_inset Formula $\Delta t$
\end_inset

 between START and STOP.
 A representation of the Vernier Delay-Line structure and working mode can
 be seen in Figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Vernier-Delay-Line-(VDL)"
plural "false"
caps "false"
noprefix "false"

\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename images/vdl.png
	width 90text%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Vernier Delay-Line (VDL) structure and propagation mechanism.
\begin_inset CommandInset label
LatexCommand label
name "fig:Vernier-Delay-Line-(VDL)"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Standard
Precisely, the time instant at which both the START and STOP signals reach
 the same bin 
\begin_inset Formula $N_{x}$
\end_inset

 is equal to:
\begin_inset Formula 
\begin{equation}
T_{x}^{(start)}=N_{x}\cdot t_{p1}\label{eq:start-instant}
\end{equation}

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{equation}
T_{x}^{(stop)}=\varDelta t+N_{x}\cdot t_{p2}\label{eq:stop-instant}
\end{equation}

\end_inset


\end_layout

\begin_layout Standard
By equating relations 
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:start-instant"
plural "false"
caps "false"
noprefix "false"

\end_inset

 and 
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:stop-instant"
plural "false"
caps "false"
noprefix "false"

\end_inset

, the time interval 
\begin_inset Formula $\varDelta t$
\end_inset

 is obtained:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{equation}
\varDelta t=N_{x}\cdot(t_{p1}-t_{p2})\ \ ,~t_{p1}>t_{p2}\label{eq:vdl-timeinterval}
\end{equation}

\end_inset


\end_layout

\begin_layout Standard
As can be seen from the obtained result, the time difference between the
 START and STOP events is dependent on 
\begin_inset Formula $t_{p1}$
\end_inset

 and 
\begin_inset Formula $t_{p2}$
\end_inset

, and every fluctuation of their values will directly impact on the instrument's
 resolution.
 Therefore, this architecture is not so reliable, and the TDL-TDC in the
 most suitable choice on an FPGA.
\end_layout

\begin_layout Subsection
Thesis Goal
\end_layout

\begin_layout Standard
The main goal of this thesis work has been to implement a Tapped Delay-Line
 Time-to-Digital Converter (TDL-TDC) characterized by a better time resolution,
 a better precision, and a better accuracy with respect to the state-of-the-art
 version of this device.
 The system has been implemented at the Digital Electronics Laboratory (DigiLAB)
 at Politecnico di Milano, fully on FPGA as a tunable, plug-and-play, Intellectu
al Property Core (IP-Core).
 The IP-Core is a package containing the firmware and the parameters of
 all the blocks composing the TDC, and it is characterized by an high portabilit
y.
 The high portability is due to the fact that it can be used as a simple
 drag-and-drop unique block, thus allowing to test it very easily and promptly
 on different FPGA devices.
 This IP-Core approach has been preferred due to another great advantage,
 which is the high tunability given to the architecture.
 Indeed, all the TDC's parameters such as FSR, resolution, and number of
 channels, can be set by the user in the instantiation stage, by simply
 choosing their value on the IP-Core's Graphical User Interface (GUI).
 
\end_layout

\end_body
\end_document
